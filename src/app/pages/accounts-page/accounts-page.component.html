<div *ngIf="!hasAccessToken" class="wrapper">
  <div class="text-wrapper">
    <h1 class="title">Good Day, {{ user.name }}!</h1>
    <h4 class="subtitle">Please connect your NatWest accounts to allow us to show detailed information.</h4>
  </div>
  <button mat-flat-button color="primary" (click)="initUIFlow()">Connect Accounts</button>
</div>
<div *ngIf="hasAccessToken">
  <h1 class="title">Account Overview</h1>
  <h4 class="subtitle">This overview shows all accounts you gave access to.</h4>
  <mat-spinner *ngIf="(accountsResponse$ | async) === null" color="primary" class="spinner"></mat-spinner>
  <div *ngIf="accountsResponse$ | async as accountsResponse">
    <div class="overview-wrapper">
      <div class="svg-wrapper">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          version="1.1"
          width="100%"
          viewBox="0 0 100 100"
          enable-background="new 0 0 100 100"
          xml:space="preserve"
        >
          <path
            d="M94.271,28.645c0.001-0.048,0.003-0.096,0.003-0.143c0-1.905-1.126-4.594-6.491-6.592c-3.516-1.309-8.146-2.03-13.037-2.03  c-4.891,0-9.521,0.721-13.037,2.03c-5.365,1.997-6.491,4.687-6.491,6.592v8.31c0,0.034,0.001,0.07,0.002,0.104h-0.002v8.31  c0,0.068,0.002,0.138,0.005,0.209h-0.005v0.903c-1.374-0.122-2.792-0.186-4.233-0.186c-2.14,0-4.231,0.138-6.199,0.403v-0.151H44.77  c-0.139-1.874-1.438-4.361-6.478-6.237c-3.516-1.309-8.146-2.03-13.037-2.03s-9.521,0.721-13.037,2.03  c-5.365,1.997-6.491,4.687-6.491,6.592v9.456c0,1.905,1.126,4.594,6.491,6.591c3.516,1.309,8.146,2.03,13.037,2.03  c2.142,0,4.23-0.141,6.199-0.407v7.068c0,1.905,1.126,4.594,6.491,6.591c3.516,1.309,8.146,2.03,13.037,2.03  s9.521-0.721,13.037-2.03c5.365-1.997,6.491-4.687,6.491-6.592l-0.003-8.174c0.001-0.045,0.003-0.091,0.003-0.135H70.51  c0.001-0.035,0.002-0.07,0.002-0.105l0-0.902c1.374,0.122,2.792,0.186,4.234,0.186c4.891,0,9.521-0.721,13.037-2.03  c5.365-1.997,6.491-4.687,6.491-6.592l-0.003-8.372c0.002-0.049,0.003-0.098,0.003-0.146l-0.003-8.167  c0.001-0.048,0.003-0.096,0.003-0.143h-0.002c0.001-0.035,0.002-0.07,0.002-0.105L94.271,28.645z M63.21,25.947  c3.047-1.134,7.144-1.759,11.535-1.759c4.391,0,8.487,0.625,11.535,1.759c2.905,1.081,3.637,2.17,3.684,2.52l0,0.07  c-0.047,0.35-0.779,1.439-3.684,2.52c-3.047,1.134-7.144,1.759-11.535,1.759c-4.391,0-8.487-0.625-11.535-1.759  c-3.01-1.12-3.687-2.249-3.687-2.555C59.523,28.195,60.2,27.067,63.21,25.947z M62.518,52.218c2.907,1.082,3.638,2.172,3.684,2.521  l0,0.068c-0.046,0.349-0.777,1.439-3.684,2.521c-3.047,1.134-7.144,1.759-11.535,1.759s-8.487-0.625-11.535-1.759  c-3.01-1.12-3.687-2.249-3.687-2.555c0-0.307,0.677-1.435,3.687-2.555c3.047-1.134,7.144-1.759,11.535-1.759  S59.47,51.084,62.518,52.218z M13.72,44.204c3.047-1.134,7.144-1.759,11.535-1.759s8.487,0.625,11.535,1.759  c3.01,1.12,3.687,2.249,3.687,2.555c0,0.129-0.121,0.404-0.484,0.762c-0.716,0.2-1.401,0.42-2.048,0.661  c-1.58,0.588-2.789,1.236-3.713,1.906c-2.625,0.641-5.72,0.985-8.977,0.985c-4.391,0-8.487-0.625-11.535-1.759  c-3.01-1.12-3.687-2.249-3.687-2.555C10.033,46.452,10.711,45.324,13.72,44.204z M13.72,58.771c-3.01-1.12-3.687-2.248-3.687-2.555  v-3.83c0.636,0.334,1.36,0.658,2.185,0.965c3.516,1.309,8.146,2.03,13.037,2.03c2.142,0,4.23-0.141,6.199-0.407v5.112  c-1.934,0.291-4.03,0.445-6.199,0.445C20.864,60.53,16.768,59.905,13.72,58.771z M62.518,74.053  c-3.047,1.134-7.144,1.759-11.535,1.759s-8.487-0.625-11.535-1.759c-3.01-1.12-3.687-2.249-3.687-2.555v-2.683  c0.636,0.334,1.36,0.658,2.185,0.965c3.516,1.309,8.146,2.03,13.037,2.03s9.521-0.721,13.037-2.03  c0.825-0.307,1.548-0.63,2.184-0.965l0.001,2.683C66.205,71.805,65.527,72.933,62.518,74.053z M66.205,63.084h-0.003v0.034  c-0.046,0.35-0.777,1.439-3.684,2.521c-3.047,1.134-7.144,1.759-11.535,1.759s-8.487-0.625-11.535-1.759  c-3.01-1.12-3.687-2.249-3.687-2.555V60.4c0.636,0.334,1.36,0.658,2.185,0.965c3.516,1.309,8.146,2.03,13.037,2.03  s9.521-0.721,13.037-2.03c0.825-0.307,1.548-0.63,2.184-0.965L66.205,63.084C66.205,63.084,66.205,63.084,66.205,63.084z   M86.28,56.301c-3.047,1.134-7.144,1.759-11.535,1.759c-1.454,0-2.873-0.071-4.235-0.205l-0.001-2.946  c0.001-0.045,0.003-0.091,0.003-0.135c0-0.351-0.039-0.728-0.134-1.123c1.416,0.13,2.879,0.197,4.368,0.197  c4.891,0,9.521-0.721,13.037-2.03c0.824-0.307,1.548-0.63,2.184-0.965l0.001,2.892C89.967,54.052,89.289,55.18,86.28,56.301z   M86.28,47.782c-3.047,1.134-7.144,1.759-11.535,1.759c-4.391,0-8.487-0.625-11.535-1.759c-3.01-1.12-3.687-2.248-3.687-2.555  v-2.683c0.636,0.334,1.36,0.658,2.185,0.965c3.516,1.309,8.146,2.03,13.037,2.03c4.891,0,9.521-0.721,13.037-2.03  c0.824-0.307,1.548-0.63,2.184-0.965l0.001,2.683C89.967,45.533,89.289,46.662,86.28,47.782z M89.967,36.813h-0.003v0.034  c-0.047,0.35-0.779,1.439-3.684,2.52c-3.047,1.134-7.144,1.759-11.535,1.759c-4.391,0-8.487-0.625-11.535-1.759  c-3.01-1.12-3.687-2.248-3.687-2.555v-2.683c0.636,0.334,1.36,0.658,2.185,0.965c3.516,1.309,8.146,2.03,13.037,2.03  c4.891,0,9.521-0.721,13.037-2.03c0.824-0.307,1.548-0.63,2.184-0.965L89.967,36.813C89.967,36.813,89.967,36.813,89.967,36.813z"
          ></path>
        </svg>
      </div>
      <h1 class="mat-display-1 total" [ngClass]="accountsResponse.totalBalance < 0 ? 'alert-negative' : ''">
        {{ accountsResponse.totalBalance }}
      </h1>
      <h4 class="currency">{{ accountsResponse.accounts[0].currency }}</h4>
    </div>
    <h4 class="subtitle">Valuta: {{ dateToday }}</h4>
    <div class="card-container">
      <app-account-card
        *ngFor="let account of accountsResponse.accounts"
        [accountData]="account"
        (click)="navigate(account.accountId)"
      ></app-account-card>
    </div>
  </div>
</div>
